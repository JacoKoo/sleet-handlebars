var BlockHelper,Tag,extend=function(e,t){function r(){this.constructor=e}for(var n in t)hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;Tag=require("sleet").Tag,module.exports=BlockHelper=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.elseTag=this.findElse()}return extend(t,e),t.prototype.tagOpenStart="{{#",t.prototype.tagOpenEnd="}}",t.prototype.tagCloseStart="{{/",t.prototype.tagCloseEnd="}}",t.prototype.generateTagStart=function(e){return e.push(this.tagOpenStart).push(this.getName())},t.prototype.getName=function(){return this.name},t.prototype.generateAttribute=function(e,t){var r,n,o,p;return n=e.name,o=e.value,t.push(" "),"identifier"!==n.type?t.push("quoted"===n.type?'"'+n.value+'"':n.value):(t.push(n.value),0!==o.length?(p=function(){var e,t,n;for(n=[],e=0,t=o.length;t>e;e++)r=o[e],n.push("quoted"===r.type?'"'+r.value+'"':r.value);return n}(),t.push("=").push(p.join(""))):void 0)},t.prototype.generateOpenEnd=function(e){return e.push(this.tagOpenEnd)},t.prototype.generateClose=function(e){return this.selfClosing()?void 0:(this.generateElse(e),t.__super__.generateClose.apply(this,arguments))},t.prototype.generateTagEnd=function(e){return e.push(this.tagCloseStart).push(this.getName()).push(this.tagCloseEnd)},t.prototype.generateElse=function(e){return this.elseTag?(this.elseTag.__paired__=!0,e.createTag(this.elseTag,this.parent).generate(e)):void 0},t.prototype.findElse=function(){var e,t,r,n,o;for(o=this.parent.options.children,e=r=0,n=o.length;n>r;e=++r)if(t=o[e],"else"===t.name&&!t.__used__&&e>0&&o[e-1].name===this.name)return t;return null},t}(Tag);