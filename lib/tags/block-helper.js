var BlockHelper,Tag,extend=function(e,t){function n(){this.constructor=e}for(var r in t)hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;Tag=require("sleet").Tag,module.exports=BlockHelper=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.elseTag=this.findElse()}return extend(t,e),t.prototype.tagOpenStart="{{#",t.prototype.tagOpenEnd="}}",t.prototype.tagCloseStart="{{/",t.prototype.tagCloseEnd="}}",t.prototype.generateOpenStart=function(e){return this.isInline?e.pop():e.indent(this.indent),e.push(this.tagOpenStart).push(this.getName())},t.prototype.getName=function(){return this.name},t.prototype.generateAttribute=function(e,t){var n,r,o,p;return r=e.name,o=e.value,o||(o=[]),t.push(" "),"identifier"!==r.type?t.push("quoted"===r.type?'"'+r.value+'"':r.value):(t.push(r.value),0!==o.length?(p=function(){var e,t,r;if("quoted"===n.type)return'"'+n.value+'"';for(r=[],e=0,t=o.length;t>e;e++)n=o[e],r.push(n.value);return r}(),t.push("=").push(p.join(""))):void 0)},t.prototype.generateOpenEnd=function(e){return e.push(this.tagOpenEnd),this.needNewLineTokenAfterTagOpen()||this.selfClosing()?e.eol():void 0},t.prototype.generateClose=function(e){return this.selfClosing()?void 0:(this.generateElse(e),this.needNewLineTokenAfterTagOpen()&&!this.haveInlineChild&&e.indent(this.indent),this.haveInlineChild&&e.pop(),e.push(this.tagCloseStart).push(this.getName()).push(this.tagCloseEnd).eol())},t.prototype.needNewLineTokenAfterTagOpen=function(){var e;return e=t.__super__.needNewLineTokenAfterTagOpen.apply(this,arguments),e?!0:!!this.elseTag},t.prototype.generateElse=function(e){return this.elseTag?(this.elseTag.__paired__=!0,e.createTag(this.elseTag,this.parent).generate(e)):void 0},t.prototype.findElse=function(){var e,t,n,r,o;for(o=this.parent.options.children,e=n=0,r=o.length;r>n;e=++n)if(t=o[e],"else"===t.name&&!t.__used__&&e>0&&o[e-1].name===this.name)return t;return null},t}(Tag);