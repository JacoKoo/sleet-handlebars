!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("sleet"),require("fs"),require("path")):"function"==typeof define&&define.amd?define(["exports","sleet","fs","path"],t):t(e.SleetHandlebars={},e.Sleet,e.NODE_FS,e.NODE_PATH)}(this,function(e,l,r,o){"use strict";var a="default"in l?l.default:l;function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}r=r&&r.hasOwnProperty("default")?r.default:r,o=o&&o.hasOwnProperty("default")?o.default:o;var s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),i=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var u=r.get;return void 0!==u?u.call(i):void 0},p=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},f=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},h=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){this.tagOpen(e),this.content(e),this.tagClose(e)}},{key:"tagOpen",value:function(e){this.openStart(e),this.attributes(e),this.openEnd(e)}},{key:"openStart",value:function(e){e.eol().indent().push("<"),this.node.namespace&&e.push(this.node.namespace).push(":"),e.push(this.node.name||"div")}},{key:"attributes",value:function(i){var r=this,e=this.mergeAttributeGroup.apply(this,[i].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}([this.dotsAndHash()].concat(this.node.attributeGroups))));e.length&&i.push(" "),e.forEach(function(e,t){var n=i.compile(e,r.stack);n&&(t&&i.push(" "),n.mergeUp())})}},{key:"openEnd",value:function(e){e.push(">")}},{key:"content",value:function(t){var n=this;this.selfClosing()||this.node.children.forEach(function(e){return t.compileUp(e,n.stack)})}},{key:"tagClose",value:function(e){this.selfClosing()||(e.haveIndent&&e.eol().indent(),e.push("</"),this.node.namespace&&e.push(this.node.namespace).push(":"),e.push(this.node.name||"div").push(">"))}},{key:"selfClosing",value:function(){return!1}},{key:"dotsAndHash",value:function(){if(!this.node.hash&&!this.node.dots.length)return null;var e=this.node.location.start,t=void 0;t=this.node.attributeGroups.length?this.node.attributeGroups[0].location.start:this.node.location.end;var n={start:{offset:e.offset,line:e.line,column:e.column},end:{offset:t.offset,line:t.line,column:t.column}},i=[];if(this.node.hash){var r=[new a.StringValue(this.node.hash,n)];i.push(new a.Attribute(void 0,"id",r,n))}if(this.node.dots.length){var o=this.node.dots.map(function(e){return new a.StringValue(e,n)});i.push(new a.Attribute(void 0,"class",o,n))}return new a.AttributeGroup(i,void 0,n)}},{key:"mergeAttributeGroup",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n.filter(function(e){return!!e});if(!r.length)return[];if(!1!==e.options.ignoreSetting)return[r.reduce(function(e,t){return e.merge(t,!0),e})];var o=r.filter(function(e){return!e.setting});return o.length?r.filter(function(e){return!!e.setting}).concat(o.reduce(function(e,t){return e.merge(t),e})):r}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(a.AbstractCompiler);n.type=a.NodeType.Tag,t.TagCompiler=n;var r=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],i=function(e){function i(){return s(this,i),f(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return p(i,n),c(i,[{key:"selfClosing",value:function(){return!0}}],[{key:"create",value:function(e,t){var n=e;if(n.name&&-1!==r.indexOf(n.name))return new i(n,t)}}]),i}();t.EmptyTagCompiler=i});t(u);var v=u.TagCompiler,y=(u.EmptyTagCompiler,n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},n=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(n){var i=this;if(this.node.text.length){var r=this.escape(),e=this.node.text.filter(function(e){return!!e.length});this.inline()||n.eol(),e.forEach(function(e){var t=e.map(function(e){return e.toHTMLString()}).join("");t.length&&(i.inline()||n.indent(),n.push(r?t.replace(/[&<>"'`=\/]/g,function(e){return o[e]}):t)),n.eol()}),n.pop()}}},{key:"escape",value:function(){return"escape"===this.node.namespace}},{key:"inline",value:function(){return"inline"===this.node.namespace}}],[{key:"create",value:function(e,t){if("|"===e.name)return new n(e,t)}}]),n}(a.AbstractCompiler);n.type=a.NodeType.Tag,t.TextCompiler=n}));t(y);var m=y.TextCompiler,d=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"tagOpen",value:function(e){e.eol().indent().push("\x3c!--"),this.inline()&&e.push(" ")}},{key:"tagClose",value:function(e){e.haveIndent&&e.eol().indent(),this.inline()&&e.push(" "),e.push("--\x3e")}},{key:"inline",value:function(){var e=this.node.children[0];return e&&"inline"===e.namespace}}],[{key:"create",value:function(e,t){if("#"===e.name)return new n(e,t)}}]),n}(u.TagCompiler);t.CommentCompiler=n;var i=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){e.eol().indent().push("<!DOCTYPE html>")}}],[{key:"create",value:function(e,t){if("doctype"===e.name)return new n(e,t)}}]),n}(u.TagCompiler);t.DoctypeCompiler=i;var r=function(e){function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];s(this,r);var i=f(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return i.closeIt=n,i}return p(r,e),c(r,null,[{key:"create",value:function(e,t){var n=e;return"ieif"===n.name?new r(n,t,!1):"@ieif"===n.name?new r(n,t,!0):void 0}}]),c(r,[{key:"openStart",value:function(e){e.eol().indent().push("\x3c!--[if ")}},{key:"openEnd",value:function(e){e.push(this.closeIt?"]>\x3c!--\x3e":"]>")}},{key:"attributes",value:function(e){if(this.node.attributeGroups.length){var t=this.node.attributeGroups[0].attributes[0];if(t&&t.values[0]&&t.values[0]instanceof a.StringValue){var n=t.values[0];e.push(n.value)}}}},{key:"tagClose",value:function(e){e.haveIndent&&e.eol().indent(),e.push(this.closeIt?"\x3c!--<![endif]--\x3e":"<![endif]--\x3e")}}]),r}(u.TagCompiler);t.IeifCompiler=r;var o=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(r){var o=this;this.node.attributeGroups.length&&(r.eol().indent(),this.node.attributeGroups.forEach(function(i){return i.attributes.forEach(function(n){return n.values.forEach(function(e){var t=o.stack.concat([i,n]);r.compileUp(e,t)})})}))}}],[{key:"create",value:function(e,t){if("echo"===e.name)return new n(e,t)}}]),n}(u.TagCompiler);t.EchoCompiler=o});t(d);d.CommentCompiler,d.DoctypeCompiler,d.IeifCompiler;var g=d.EchoCompiler,_=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){s(this,t),this.value=e}return c(t,[{key:"compile",value:function(e){e.push(this.value.value)}}]),t}(),i=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,n),c(t,null,[{key:"create",value:function(e){return new t(e)}}]),t}();i.type=a.NodeType.StringValue,t.StringValueCompiler=i;var r=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,n),c(t,null,[{key:"create",value:function(e){return new t(e)}}]),t}();r.type=a.NodeType.BooleanValue,t.BooleanValueCompiler=r;var o=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,n),c(t,null,[{key:"create",value:function(e){return new t(e)}}]),t}();o.type=a.NodeType.NumberValue,t.NumberValueCompiler=o;var u=function(e){function t(){return s(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,n),c(t,null,[{key:"create",value:function(e){return new t(e)}}]),t}();u.type=a.NodeType.IdentifierValue,t.IdentifierValueCompiler=u});t(_);_.StringValueCompiler,_.BooleanValueCompiler,_.NumberValueCompiler,_.IdentifierValueCompiler;var b=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(i){var r=this;this.node.attributes.forEach(function(e,t){var n=i.compile(e,r.stack);n&&(t&&i.push(" "),n.mergeUp())})}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(a.AbstractCompiler);n.type=a.NodeType.AttributeGroup,t.AttributeGroupCompiler=n;var i=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){var t=this.key(e),n=this.value(e);t||(t=n),e.push(t).push('="').push(n).push('"')}},{key:"key",value:function(e){var t="";return this.node.namespace&&this.node.name&&(t+=this.node.namespace+":"),this.node.name&&(t+=this.node.name),t}},{key:"value",value:function(n){var i=this,e=this.node.values.map(function(e){var t=n.compile(e,i.stack);return t?t.getOutput():""});return"class"===this.node.name?e.join(" "):e.join("")}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(a.AbstractCompiler);i.type=a.NodeType.Attribute,t.AttributeCompiler=i});t(b);b.AttributeGroupCompiler;var k=b.AttributeCompiler,O=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(t){var n=this,e=t.options.sourceFile||o.resolve(".");r.statSync(e).isFile()&&(e=o.dirname(e));var i=o.resolve(e,this.getPath());a.parse(r.readFileSync(i,"utf-8")).nodes.forEach(function(e){return t.compileUp(e,n.stack,-1)})}},{key:"getPath",value:function(){if(this.node.attributeGroups.length){var e=this.node.attributeGroups[0].attributes[0].values[0];if(e){if(e instanceof a.StringValue)return e.value;if(e instanceof a.IdentifierValue)return e.value}}var t=this.node.location.start,n=t.line,i=t.column;throw new SyntaxError("no file specified, line: "+n+" column: "+i)}}],[{key:"create",value:function(e,t){if("@include"===e.name)return new n(e,t)}}]),n}(u.TagCompiler);t.IncludeCompiler=n});t(O);O.IncludeCompiler;var C=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){if(!this.node.hash)throw new Error("Hash property is required for mixin definition. eg. @mixin#name");if(0!==this.node.indent)throw new Error("Mixin definition must be placed in top level(the indent of it must be 0)");if(e.note.mixin||(e.note.mixin={}),e.note.mixin[this.node.hash])throw new Error("Mixin definition #"+this.node.hash+" have already defined");e.note.mixin[this.node.hash]={nodes:this.node.children,replacement:this.replacement(e)}}},{key:"replacement",value:function(u){var a=this;return this.node.attributeGroups.length?this.node.attributeGroups[0].attributes.reduce(function(e,t){var n=t.values[0];if(!n)return e;var i=a.stack.concat([a.node.attributeGroups[0],t]),r=u.compile(n,i);if(!r)return e;var o=r.getOutput();return t.name?e[t.name]=o:e[o]=null,e},{}):{}}}],[{key:"create",value:function(e,t){if("@mixin"===e.name)return new n(e,t)}}]),n}(u.TagCompiler);t.MixinDefineCompiler=i;var n=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,i),c(n,[{key:"compile",value:function(e){var t=this;if(!this.node.hash)throw new Error("Hash property is required for mixin reference. eg. mixin#name");if(!e.note.mixin||!e.note.mixin[this.node.hash])throw new Error("Mixin #"+this.node.hash+" is not defined");var n=e.note.mixin[this.node.hash],i=e.sub();n.nodes.forEach(function(e){return i.compileUp(e,t.stack,-2)});var r=i.getOutput(),o=Object.assign({},n.replacement,this.replacement(e)),u=Object.keys(o).reduce(function(e,t){return e.replace(new RegExp("\\$"+t,"g"),o[t])},r);e.push(u)}}],[{key:"create",value:function(e,t){if("mixin"===e.name)return new n(e,t)}}]),n}();t.MixinReferenceCompiler=n});t(C);C.MixinDefineCompiler,C.MixinReferenceCompiler;var w=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.plugin={prepare:function(e){e.register(u.TagCompiler,y.TextCompiler,u.EmptyTagCompiler,d.CommentCompiler,d.DoctypeCompiler,d.IeifCompiler,d.EchoCompiler,C.MixinDefineCompiler,C.MixinReferenceCompiler),e.register(_.StringValueCompiler,_.BooleanValueCompiler,_.NumberValueCompiler,_.IdentifierValueCompiler),e.register(b.AttributeGroupCompiler,b.AttributeCompiler),e.register(O.IncludeCompiler)},compile:function(e,t,n){var i=e.nodes,r=e.declaration;return i.forEach(function(e){return n.compileUp(e,new a.SleetStack,-1)}),{code:n.getOutput(),extension:r&&r.extension||"html"}}}});t(w);var x=w.plugin,j=function(e){function i(){return s(this,i),f(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return p(i,v),c(i,[{key:"compile",value:function(e,t){this.tagOpen(e),this.content(e),t&&(e.eol().indent().push("{{else}}"),e.compileUp(t,this.stack,-1)),this.tagClose(e)}},{key:"openStart",value:function(e){e.eol().indent().push("{{#").push(this.node.name)}},{key:"openEnd",value:function(e){e.push("}}")}},{key:"tagClose",value:function(e){this.selfClosing()||(e.haveIndent&&e.eol().indent(),e.push("{{/"+this.node.name+"}}"))}}],[{key:"create",value:function(e,t){var n=e;if(n.name&&-1!==t.note("blocks").indexOf(n.name))return new i(e,t)}}]),i}(),T=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,v),c(n,[{key:"compile",value:function(e){i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"content",this).call(this,e)}}],[{key:"create",value:function(e,t){if("else"===e.name)return new n(e,t)}}]),n}(),P=function(e){if(e.last(l.NodeType.Setting))return!0;if(e.last(l.NodeType.TransformValue))return!0;var t=e.last(l.NodeType.Helper);if(t&&t.node.name&&!t.note.content)return!0;var n=e.last(l.NodeType.Tag);if(!n||!n.node.name)return!1;var i=n.node;return!!i.name&&(-1!==e.note("blocks").indexOf(i.name)||(-1!==e.note("inlines").indexOf(i.name)||"@"===i.name.slice(0,1)&&-1!==e.note("inlines").indexOf(i.name.slice(1))))},E=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,k),c(n,[{key:"compile",value:function(e){var t=this.key(e),n=this.value(e);t?e.push(t).push("=").push(n):e.push(n)}}],[{key:"create",value:function(e,t){if(P(t))return new n(e,t)}}]),n}(),A=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){e.push('"'+this.node.value+'"')}}],[{key:"create",value:function(e,t){if(P(t))return new n(e,t)}}]),n}(l.AbstractCompiler);A.type=l.NodeType.StringValue;var S=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){var t=this.stack.last(l.NodeType.Tag);e.push(t.note.noEscape?"{{{"+this.node.value+"}}}":"{{"+this.node.value+"}}")}}],[{key:"create",value:function(e,t){if(!P(t))return new n(e,t)}}]),n}(l.AbstractCompiler);S.type=l.NodeType.IdentifierValue;var N=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){if(this.node.setting){var t=e.create(this.node.setting,this.stack);if(t){var n=e.sub();t.compile(n,this.node),n.mergeUp()}}}}],[{key:"create",value:function(e,t){if(e.setting)return new n(e,t)}}]),n}(l.AbstractCompiler);N.type=l.NodeType.AttributeGroup;var V=function(){function n(e,t){s(this,n),this.node=e,this.stack=t}return c(n,[{key:"compile",value:function(i,e){var r=this;i.push("{{#").push(this.node.name);var o=this.stack.concat(this.node);this.node.attributes.length&&i.push(" "),this.node.attributes.forEach(function(e,t){var n=i.compile(e,o);n&&(t&&i.push(" "),n.mergeUp())}),i.push("}}"),e.attributes.forEach(function(e,t){var n=i.compile(e,r.stack);n&&(t&&i.push(" "),n.mergeUp())}),i.push("{{/"+this.node.name+"}}")}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}();function M(e,t,n){for(var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=0;r<t.length;){var o=t[r],u=t[r+1];if(u&&"else"===u.name){var a=e.create(o,n);if(!(a&&a instanceof j)){var s=o.location.start;throw new SyntaxError("not paired else tag, line: "+s.line+", column: "+s.column)}var l=e.sub(i);a.compile(l,u),l.mergeUp(),r+=2}else e.compileUp(o,n,i),r++}}V.type=l.NodeType.Setting;var G=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,v),c(n,[{key:"content",value:function(e){this.selfClosing()||M(e,this.node.children,this.stack)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(),I=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,g),c(n,[{key:"compile",value:function(e){this.stack.last().note.noEscape=!0,i(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"compile",this).call(this,e)}}],[{key:"create",value:function(e,t){if("@echo"===e.name)return new n(e,t)}}]),n}(),U=function(e){function o(e,t,n){s(this,o);var i=f(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return i.noEscape=n,i}return p(o,v),c(o,null,[{key:"create",value:function(e,t){var n=e;if(n.name){var i=!0,r=n.name;return"@"===r.slice(0,1)&&(r=r.slice(1),i=!1),-1!==t.note("inlines").indexOf(r)?new o(e,t,!i):void 0}}}]),c(o,[{key:"openStart",value:function(e){this.node.name&&(e.eol().indent().push(this.noEscape?"{{{":"{{"),e.push(this.noEscape?this.node.name.slice(1):this.node.name))}},{key:"openEnd",value:function(e){e.push(this.noEscape?"}}}":"}}")}},{key:"selfClosing",value:function(){return!0}}]),o}(),D=function(e){function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;s(this,r);var i=f(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return i.count=n,i}return p(r,e),c(r,[{key:"compile",value:function(e){var n=this;if(this.node.name){var t=this.stack.note("helpers")[this.node.name]||1,i=this.node.attributes.slice(0,t),r=this.node.attributes.slice(t),o=e.sub();if(i.map(function(e,t){t&&o.push(" "),o.compileUp(e,n.stack)}),r.length){this.stack.last().note.content=!0,e.push("{{#"+this.node.name+" "+o.getOutput()+"}}");var u=o.compile(r[0],this.stack),a=u?u.getOutput():"";if(e.push(a),1<r.length){var s=e.sub();r.slice(1).map(function(e){return s.compileUp(e,n.stack)});var l=s.getOutput();e.push("{{else}}"+l)}e.push("{{/"+this.node.name+"}")}else e.push("{{"+this.node.name+" "+o.getOutput()+"}}")}else this.noName(e)}},{key:"noName",value:function(i){var r=this,e=this.stack.last(l.NodeType.Attribute),o=e&&"class"===e.node.name;this.node.attributes.forEach(function(e,t){var n=i.compile(e,r.stack);n&&(t&&o&&i.push(" "),n.mergeUp())})}}],[{key:"create",value:function(e,t){return new r(e,t)}}]),r}(l.AbstractCompiler);D.type=l.NodeType.Helper;var H=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){e.compileUp(this.node.value,this.stack)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(l.AbstractCompiler);H.type=l.NodeType.HelperAttribute;var q=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){e.push('"'+this.node.value+'"')}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(l.AbstractCompiler);q.type=l.NodeType.CompareOperator;var F=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(t){var n=this;if(this.node.text.length){var e=this.node.text.filter(function(e){return!!e.length});this.inline()||t.eol(),e.forEach(function(e){e.map(function(e){return e.toHTMLString()}).join("").length&&(n.inline()||t.indent(),e.forEach(function(e){return t.compileUp(e,n.stack)})),t.eol()}),t.pop()}}},{key:"inline",value:function(){return"inline"===this.node.namespace}}],[{key:"create",value:function(e,t){if("|"===e.name)return new n(e,t)}}]),n}(l.AbstractCompiler);F.type=l.NodeType.Tag;var R=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){e.push(this.node.toHTMLString())}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(l.AbstractCompiler);R.type=l.NodeType.StaticText;var B=function(e){function n(){return s(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,e),c(n,[{key:"compile",value:function(e){e.compileUp(this.node.value,this.stack)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(l.AbstractCompiler);B.type=l.NodeType.DynamicText;var L={prepare:function(e){x.prepare&&x.prepare(e),e.replace(v,G),e.replace(m,F),e.register(j,T,U),e.register(D,H),e.register(E,A,S),e.register(V,N),e.register(I,R,B),e.register(q)},compile:function(e,t,n){var i=e.nodes,r=e.declaration,o={},u=["if","each","unless","with"],a=[];if(t.pluginOptions&&t.pluginOptions.handlebars){var s=t.pluginOptions.handlebars;Array.isArray(s.block)&&s.block.forEach(function(e){return u.push(e)}),Array.isArray(s.inline)&&s.inline.forEach(function(e){return a.push(e)}),s.helper&&Object.assign(o,s.helper)}return r&&((r.option("block")||"").split(",").forEach(function(e){e.trim()&&u.push(e.trim())}),(r.option("inline")||"").split(",").forEach(function(e){e.trim()&&a.push(e.trim())}),(r.option("helper")||"").split(",").forEach(function(e){var t=e.split(":"),n=h(t,2),i=n[0],r=n[1];o[i.trim()]=Number(r)||1})),M(n,i,new l.SleetStack([],{blocks:u,inlines:a,helpers:o}),-1),{code:n.getOutput(),extension:r&&r.extension||"hbs"}}};e.plugin=L,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sleet-handlebars.min.js.map
